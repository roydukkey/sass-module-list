// Copyright (c) roydukkey. All rights reserved.
// Licensed under the MIT. See LICENSE file in the project root for full license information.
////
/// @author roydukkey
/// @group api
////

@use 'sass:list'
@use 'sass:meta'
@use 'empty'
@use '../internal'


///
/// Creates a new list populated with the results of calling a specified function on every item in a list.
///
/// @param {List} $list - The list from which items will be processed.
/// @param {Function} $transformer - The transform function to apply to each item. The first parameter is the current item being processed in the list. The second parameter is the index of the current item being processed in the list. The third parameter is the list being processed. The returned value may be any type.
/// @param {String} $separator [auto] - The type of separator to be used by the new list.
/// @param {Boolean | String} $bracketed [auto] - Whether the new list has square brackets or no brackets.
/// @param {ArgList} $args - Additional parameters which are provided to transform function.
/// @return {List}
///
/// @throw `#{$transformer}` is not a function.
/// @throw Must be "space", "comma", "slash", or "auto".
///
/// @access public
/// @require internal.$exception-function
/// @require internal.exception-separator
/// @require internal.exception-type
/// @require internal.param-separator-is-invalid
///
@function map($list, $transformer, $separator: auto, $bracketed: auto, $args...)
	internal.$exception-function: 'map'

	@if meta.type-of($transformer) != 'function'
		@error internal.exception-type('transformer', $transformer, 'function')

	@if internal.param-separator-is-invalid($separator)
		@error internal.exception-separator()

	$result: empty.empty($separator, $bracketed, $list)
	$index: 1

	@each $item in $list
		$result: list.append($result, meta.call($transformer, $item, $index, $list, $args...))
		$index: $index + 1

	@return $result
